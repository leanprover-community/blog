<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Liquid Tensor Experiment: an update | Lean community blog</title>
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css2?family=Merriweather&amp;family=Open+Sans&amp;family=Source+Code+Pro:wght@400;600&amp;display=swap" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://leanprover-community.github.io/blog/posts/lte-update/">
<link rel="icon" href="https://leanprover-community.github.io/img/favicon.ico" sizes="48x48">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://leanprover-community.github.io/blog/meta-twitter.png">
<meta name="twitter:title" content="Liquid Tensor Experiment: an update | Lean community blog">
<meta name="author" content="Johan Commelin">
<link rel="prev" href="../intro-to-mathport/" title="Update on mathport (Dec 2021)" type="text/html">
<link rel="next" href="../month-in-mathlib/2021/month-in-mathlib-dec-2021/" title="This month in mathlib (Dec 2021)" type="text/html">
<meta property="og:site_name" content="Lean community blog">
<meta property="og:title" content="Liquid Tensor Experiment: an update">
<meta property="og:url" content="https://leanprover-community.github.io/blog/posts/lte-update/">
<meta property="og:description" content="In June 2021, we celebrated
the first milestone of the Liquid Tensor Experiment.
The achievement was covered in
Nature
and
Quanta.
Since then, we haven't been sitting still, and it's high time for a s">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-12-31T21:04:21+02:00">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
            <header id="header"><h1 id="brand"><a href="../../" title="Lean community blog" rel="home">

        <span id="blog-title">Lean community blog</span>
    </a></h1>

        
            <nav id="menu"><ul>
<li><a href="https://leanprover-community.github.io/">Main site</a></li>
                <li><a href="../../archive.html">Archive</a></li>
                <li><a href="../../categories/">Tags</a></li>
                <li><a href="../../about/">About</a></li>
                <li><a href="../../rss.xml">RSS feed</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Liquid Tensor Experiment: an update</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                        <a class="u-url" href="../../authors/johan-commelin/">Johan Commelin</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2021-12-31T21:04:21+02:00" itemprop="datePublished" title="2021-12-31 21:04">2021-12-31 21:04</time></a>
            </p>
                    <p class="sourceline"><a href="https://github.com/leanprover-community/blog/tree/deploy/docs/posts/lte-update/index.md" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>In June 2021, we <a href="https://xenaproject.wordpress.com/2021/06/05/half-a-year-of-the-liquid-tensor-experiment-amazing-developments/">celebrated</a>
the first milestone of the Liquid Tensor Experiment.
The achievement was covered in
<a href="https://www.nature.com/articles/d41586-021-01627-2">Nature</a>
and
<a href="https://www.quantamagazine.org/lean-computer-program-confirms-peter-scholze-proof-20210728/">Quanta</a>.
Since then, we haven't been sitting still, and it's high time for a status update.</p>
<!-- TEASER_END -->

<p>The first milestone was a proof of the following
<a href="https://github.com/leanprover-community/lean-liquid/blob/b94b4bf4c9a60aa72bc226d0ee4218f8ef9e6049/src/liquid.lean#L37">statement</a></p>
<pre class="code literal-block"><span class="sd">/-- A mix of Theorems 9.4 and 9.5 in [Analytic] -/</span>
<span class="kd">theorem</span> <span class="n">first_target</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">k</span> <span class="n">K</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hk</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">))</span> <span class="o">(</span><span class="n">c₀</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">SemiNormedGroup.</span><span class="o">{</span><span class="mi">0</span><span class="o">})</span> <span class="o">[</span><span class="n">normed_with_aut</span> <span class="n">r</span> <span class="n">V</span><span class="o">],</span>
    <span class="o">((</span><span class="n">BD.data.system</span> <span class="n">κ</span> <span class="n">r</span> <span class="n">V</span> <span class="n">r'</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="bp">$</span> <span class="n">of</span> <span class="n">r'</span> <span class="o">(</span><span class="n">Mbar</span> <span class="n">r'</span> <span class="n">S</span><span class="o">)))</span><span class="bp">.</span><span class="n">is_weak_bounded_exact</span> <span class="n">k</span> <span class="n">K</span> <span class="n">m</span> <span class="n">c₀</span> <span class="o">:=</span>
</pre>
<p>This says that a certain system of complexes <code>(BD.data.system κ r V r').obj (op $ of r' (Mbar r' S))</code>
satisfies the technical condition of weak bounded exactness with respect to certain parameters.
This system of complexes fundamentally depends on a semi-normed group <code>V</code>
and a certain space <code>Mbar r' S</code>.
We will say a bit more about this mysterious object <code>Mbar r' S</code> later.</p>
<p>To complete the final challenge,
we need to remove the <code>sorry</code> from the following
<a href="https://github.com/leanprover-community/lean-liquid/blob/b94b4bf4c9a60aa72bc226d0ee4218f8ef9e6049/src/challenge.lean#L27">statement</a></p>
<pre class="code literal-block"><span class="kd">variables</span> <span class="o">(</span><span class="n">p'</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p'</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p'</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p'</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">)]</span>

<span class="kd">theorem</span> <span class="n">liquid_tensor_experiment</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Profinite.</span><span class="o">{</span><span class="mi">1</span><span class="o">})</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">pBanach.</span><span class="o">{</span><span class="mi">1</span><span class="o">}</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hi</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Ext</span> <span class="n">i</span> <span class="o">(</span><span class="n">ℳ_</span><span class="o">{</span><span class="n">p'</span><span class="o">}</span> <span class="n">S</span><span class="o">)</span> <span class="n">V</span> <span class="bp">≅</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</pre>
<p>In this statement, <code>ℳ_{p'} S</code> is morally a space of real-valued measures depending on the real parameter <code>p'</code>
and the <code>p</code>-Banach space <code>V</code> is an example of the semi-normed groups showing up in <code>first_target</code> above.
But the <code>Ext</code> in this statement is really about the Ext-groups of condensed abelian groups,
so both <code>ℳ_{p'} S</code> and <code>V</code> are viewed as condensed abelian groups in this theorem.</p>
<h2>Homological algebra</h2>
<p>To be able to state this theorem (e.g., to make sense of <code>Ext</code>)
we need to develop the theory of derived functors
for arbitrary abelian categories with enough injectives/projectives.
This was done by Scott Morrison, who contributed definitions of <code>Ext</code> and <code>Tor</code> to mathlib about half a year ago.
We also need to show that the category of condensed abelian groups satisfies these conditions.
Recently, Adam Topaz finished a formalization of the fact that on an arbitrary site (= category + Grothendieck topology)
the category of sheaves with values in a suitable abelian category is itself an abelian category.
In particular the category of abelian sheaves, and hence the category of condensed abelian groups, is an abelian category.
The fact that condensed abelian groups have enough projectives is almost done,
so that finally the <code>Ext</code> in the statement above does no longer depend on unformalized assumptions.</p>
<p>To be able to compute the <code>Ext</code>-groups,
we need a library of results about homological complexes, long exact sequences, and such.
A fundamental input is of course the snake lemma,
and this was formalized by Riccardo Brasca and Adam Topaz in the fall.
Andrew Yang is currently working towards a formal proof
that the homotopy category of complexes is a pretriangulated category.
This will give us important tools to manipulate the <code>Ext</code>-groups
into a shape that reduces to <code>first_target</code>.</p>
<h2>Spaces of measures</h2>
<p>As mentioned above, the space <code>ℳ_{p'} S</code> is a real condensed vector space
that is morally a space of measures.
One of the crucial insights in the proof is that it is a quotient of an arithmetic analogue
that we've been calling the space of <em>Laurent measures</em>: <code>ℳ(S, ℤ((T))_{r'})</code>,
with <code>(1/2)^{p'} = r'</code>.
This quotient map turns out to be the cokernel of an injective endomorphism of the space of Laurent measures.
Together, these two maps form a short exact sequence,
which leads to a long exact sequence of <code>Ext</code>-groups.
Hence the vanishing of the <code>Ext</code>-groups above can be reduced to a question about similar <code>Ext</code>-groups
but this time involving these spaces of Laurent measures.</p>
<p>In turn, these spaces of Laurent measures naturally admit a free module as submodule,
and the quotient is the mysterious space <code>Mbar r' S</code> that appears in <code>first_target</code>.
Together, these two short exact sequences are crucial inputs
that will be combined with the homological tools mentioned above
to reduce the main theorem to <code>first_target</code>.</p>
<p>Filippo A.E. Nuccio has been working arduously on the formalization of these results,
which amount to Theorem 6.9 of <a href="https://www.math.uni-bonn.de/people/scholze/Analytic.pdf">Analytic.pdf</a>.</p>
<h2>Breen–Deligne resolutions and MacLane's Q'-construction</h2>
<p>Finally, to compute the <code>Ext</code>-groups, at some point projective resolutions must enter the picture.
The proof in <a href="https://www.math.uni-bonn.de/people/scholze/Analytic.pdf">Analytic.pdf</a>
relies on so-called Breen–Deligne resolutions, which have the following two crucial properties:</p>
<ol>
<li>It is a functorial construction <code>A ↦ C(A)</code> that sends an abelian group (or sheaf) to a complex of abelian groups (or sheaves).</li>
<li>When viewed as a functor to the homotopy category of complexes, it is additive.
  In other words, <code>C(A ⊕ A)</code> is naturally homotopic to <code>C(A) ⊕ C(A)</code>.</li>
</ol>
<p>In addition to these properties,
Breen–Deligne resolutions have the favourable property that the construction yields a projective resolution <code>C(A)</code> for every <code>A</code>.</p>
<p>For our formalization project, they also come with the significant downside that the proof of the existence of Breen–Deligne resolutions
relies on technical results from homotopy theory,
which haven't been formalized yet.</p>
<p>But to our delight, it turns out that there are related constructions that satisfy (1) and (2) above which are good enough for our purposes and which can be formalized directly.
Indeed, the functorial complex known as "MacLane's <code>Q'</code> construction", is one such example.
On top of that, the following result holds.</p>
<p><strong>Lemma.</strong> Let $A$ and $B$ be two abelian groups (or sheaves).
If $\text{Ext}^i(Q'(A), B) = 0$ for all $i \ge 0$,
then $\text{Ext}^i(A, B) = 0$ for all $i \ge 0$.</p>
<p>This lemma is not yet formalized,
and to our knowledge it does not appear in the literature.
We hope to fix both of these issues in the near future.</p>
<p>So far, we have formalized the claim that the <code>Q'</code>-construction satisfies properties (1) and (2).
The proof of the lemma uses the tensor-hom adjunction and the fact that the homotopy category of complexes is pretriangulated.
The formalisation of these two prerequisites is active work in progress.</p>
<p>You can follow our progress on all the remaining tasks at the following
<a href="https://github.com/leanprover-community/lean-liquid/projects/2">Github project</a>.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../intro-to-mathport/" rel="prev" title="Update on mathport (Dec 2021)">Previous post</a>
            </li>
            <li class="next">
                <a href="../month-in-mathlib/2021/month-in-mathlib-dec-2021/" rel="next" title="This month in mathlib (Dec 2021)">Next post</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article><script src="https://giscus.app/client.js" data-repo="leanprover-community/blog" data-repo-id="MDEwOlJlcG9zaXRvcnkzOTM3OTE1ODU=" data-category="Announcements" data-category-id="DIC_kwDOF3jIYc4CQntU" data-mapping="og:title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en" crossorigin="anonymous" async>
        </script></main><footer id="footer"><p>Contents © 2025         The Lean prover community - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
        


    <!-- Mermaid JS for diagram rendering -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>
